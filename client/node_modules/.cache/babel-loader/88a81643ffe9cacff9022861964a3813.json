{"ast":null,"code":"import _regeneratorRuntime from\"/home/mihirpanchal/PROJECTS/book_store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mihirpanchal/PROJECTS/book_store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mihirpanchal/PROJECTS/book_store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{GlobalState}from'../../../GlobalState';import axios from'axios';function Categories(){var state=useContext(GlobalState);var _state$categoriesAPI$=_slicedToArray(state.categoriesAPI.categories,1),categories=_state$categoriesAPI$[0];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var _state$token=_slicedToArray(state.token,1),token=_state$token[0];var _state$categoriesAPI$2=_slicedToArray(state.categoriesAPI.callback,2),callback=_state$categoriesAPI$2[0],setCallback=_state$categoriesAPI$2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),onEdit=_useState4[0],setOnEdit=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),id=_useState6[0],setID=_useState6[1];var createCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res,_res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;if(!onEdit){_context.next=9;break;}_context.next=5;return axios.put(\"/api/category/\".concat(id),{name:category},{headers:{Authorization:token}});case 5:res=_context.sent;alert(res.data.msg);_context.next=13;break;case 9:_context.next=11;return axios.post('/api/category',{name:category},{headers:{Authorization:token}});case 11:_res=_context.sent;alert(_res.data.msg);case 13:setOnEdit(false);setCategory('');setCallback(!callback);_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](1);alert(_context.t0.response.data.msg);case 21:case\"end\":return _context.stop();}}},_callee,null,[[1,18]]);}));return function createCategory(_x){return _ref.apply(this,arguments);};}();var editCategory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,name){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setID(id);setCategory(name);setOnEdit(true);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function editCategory(_x2,_x3){return _ref2.apply(this,arguments);};}();var deleteCategory=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/api/category/\".concat(id),{headers:{Authorization:token}});case 3:res=_context3.sent;alert(res.data.msg);setCallback(!callback);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);alert(_context3.t0.response.data.msg);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function deleteCategory(_x4){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"categories\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:createCategory},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"category\"},\"Category\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"category\",value:category,required:true,onChange:function onChange(e){return setCategory(e.target.value);}}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},onEdit?\"Update\":\"Create\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},categories.map(function(category){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",key:category._id},/*#__PURE__*/React.createElement(\"p\",null,category.name),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return editCategory(category._id,category.name);}},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return deleteCategory(category._id);}},\"Delete\")));})));}export default Categories;","map":{"version":3,"sources":["/home/mihirpanchal/PROJECTS/book_store/client/src/components/mainpages/categories/Categories.js"],"names":["React","useState","useContext","GlobalState","axios","Categories","state","categoriesAPI","categories","category","setCategory","token","callback","setCallback","onEdit","setOnEdit","id","setID","createCategory","e","preventDefault","put","name","headers","Authorization","res","alert","data","msg","post","response","editCategory","deleteCategory","delete","target","value","map","_id"],"mappings":"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","sourcesContent":["import React, {useState, useContext} from 'react'\nimport {GlobalState} from '../../../GlobalState'\nimport axios from 'axios'\n\nfunction Categories() {\n    const state = useContext(GlobalState)\n    const [categories] = state.categoriesAPI.categories\n    const [category, setCategory] = useState('')\n    const [token] = state.token\n    const [callback, setCallback] = state.categoriesAPI.callback\n    const [onEdit, setOnEdit] = useState(false)\n    const [id, setID] = useState('')\n\n    const createCategory = async e =>{\n        e.preventDefault()\n        try {\n            if(onEdit){\n                const res = await axios.put(`/api/category/${id}`, {name: category}, {\n                    headers: {Authorization: token}\n                })\n                alert(res.data.msg)\n            }else{\n                const res = await axios.post('/api/category', {name: category}, {\n                    headers: {Authorization: token}\n                })\n                alert(res.data.msg)\n            }\n            setOnEdit(false)\n            setCategory('')\n            setCallback(!callback)\n            \n        } catch (err) {\n            alert(err.response.data.msg)\n        }\n    }\n\n    const editCategory = async (id, name) =>{\n        setID(id)\n        setCategory(name)\n        setOnEdit(true)\n    }\n\n    const deleteCategory = async id =>{\n        try {\n            const res = await axios.delete(`/api/category/${id}`, {\n                headers: {Authorization: token}\n            })\n            alert(res.data.msg)\n            setCallback(!callback)\n        } catch (err) {\n            alert(err.response.data.msg)\n        }\n    }\n\n    return (\n        <div className=\"categories\">\n            <form onSubmit={createCategory}>\n                <label htmlFor=\"category\">Category</label>\n                <input type=\"text\" name=\"category\" value={category} required\n                onChange={e => setCategory(e.target.value)} />\n\n                <button type=\"submit\">{onEdit? \"Update\" : \"Create\"}</button>\n            </form>\n\n            <div className=\"col\">\n                {\n                    categories.map(category => (\n                        <div className=\"row\" key={category._id}>\n                            <p>{category.name}</p>\n                            <div>\n                                <button onClick={() => editCategory(category._id, category.name)}>Edit</button>\n                                <button onClick={() => deleteCategory(category._id)}>Delete</button>\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default Categories\n"]},"metadata":{},"sourceType":"module"}