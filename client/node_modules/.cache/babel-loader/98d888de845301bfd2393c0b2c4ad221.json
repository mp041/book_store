{"ast":null,"code":"import _regeneratorRuntime from\"/home/mihirpanchal/PROJECTS/book_store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mihirpanchal/PROJECTS/book_store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mihirpanchal/PROJECTS/book_store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{GlobalState}from'../../GlobalState';import Menu from\"./icon/menu.svg\";import Close from\"./icon/close.svg\";import Cart from\"./icon/cart.svg\";import{Link}from'react-router-dom';import axios from'axios';function Header(){var state=useContext(GlobalState);var _state$userAPI$isLogg=_slicedToArray(state.userAPI.isLogged,1),isLogged=_state$userAPI$isLogg[0];var _state$userAPI$isAdmi=_slicedToArray(state.userAPI.isAdmin,1),isAdmin=_state$userAPI$isAdmi[0];var _state$userAPI$cart=_slicedToArray(state.userAPI.cart,1),cart=_state$userAPI$cart[0];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),menu=_useState2[0],setMenu=_useState2[1];var logoutUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/user/logout');case 2:localStorage.removeItem('firstLogin');window.location.href=\"/\";case 4:case\"end\":return _context.stop();}}},_callee);}));return function logoutUser(){return _ref.apply(this,arguments);};}();var adminRouter=function adminRouter(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/create_product\"},\"Create Product\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/category\"},\"Categories\")));};var loggedRouter=function loggedRouter(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/history\"},\"History\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\",onClick:logoutUser},\"Logout\")));};var styleMenu={left:menu?0:\"-100%\"};return/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"menu\",onClick:function onClick(){return setMenu(!menu);}},/*#__PURE__*/React.createElement(\"img\",{src:Menu,alt:\"\",width:\"30\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"},/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},isAdmin?'Admin':'Mihir'))),/*#__PURE__*/React.createElement(\"ul\",{style:styleMenu},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},isAdmin?'Products':'Shop')),isAdmin&&adminRouter(),isLogged?loggedRouter():/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/login\"},\"Login / Register\")),/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return setMenu(!menu);}},/*#__PURE__*/React.createElement(\"img\",{src:Close,alt:\"\",width:\"30\",className:\"menu\"}))),isAdmin?'':/*#__PURE__*/React.createElement(\"div\",{className:\"cart-icon\"},/*#__PURE__*/React.createElement(\"span\",null,cart.length),/*#__PURE__*/React.createElement(Link,{to:\"/cart\"},/*#__PURE__*/React.createElement(\"img\",{src:Cart,alt:\"\",width:\"30\"}))));}export default Header;","map":{"version":3,"sources":["/home/mihirpanchal/PROJECTS/book_store/client/src/components/headers/Header.js"],"names":["React","useContext","useState","GlobalState","Link","axios","Header","state","userAPI","isLogged","isAdmin","cart","menu","setMenu","logoutUser","get","localStorage","removeItem","window","location","href","adminRouter","loggedRouter","styleMenu","left","Menu","Close","length","Cart"],"mappings":"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","sourcesContent":["import React, {useContext, useState} from 'react'\nimport {GlobalState} from '../../GlobalState'\nimport Menu from './icon/menu.svg'\nimport Close from './icon/close.svg'\nimport Cart from './icon/cart.svg'\nimport {Link} from 'react-router-dom'\nimport axios from 'axios'\n\nfunction Header() {\n    const state = useContext(GlobalState)\n    const [isLogged] = state.userAPI.isLogged\n    const [isAdmin] = state.userAPI.isAdmin\n    const [cart] = state.userAPI.cart\n    const [menu, setMenu] = useState(false)\n\n    const logoutUser = async () =>{\n        await axios.get('/user/logout')\n\n        localStorage.removeItem('firstLogin')\n\n        window.location.href = \"/\";\n    }\n\n    const adminRouter = () =>{\n        return(\n            <>\n                <li><Link to=\"/create_product\">Create Product</Link></li>\n                <li><Link to=\"/category\">Categories</Link></li>\n            </>\n        )\n    }\n\n    const loggedRouter = () =>{\n        return(\n            <>\n                <li><Link to=\"/history\">History</Link></li>\n                <li><Link to=\"/\" onClick={logoutUser}>Logout</Link></li>\n            </>\n        )\n    }\n\n\n    const styleMenu = {\n        left: menu ? 0 : \"-100%\"\n    }\n\n    return (\n        <header>\n            <div className=\"menu\" onClick={() => setMenu(!menu)}>\n                <img src={Menu} alt=\"\" width=\"30\" />\n            </div>\n\n            <div className=\"logo\">\n                <h1>\n                    <Link to=\"/\">{isAdmin ? 'Admin' : 'Mihir'}</Link>\n                </h1>\n            </div>\n\n            <ul style={styleMenu}>\n                <li><Link to=\"/\">{isAdmin ? 'Products' : 'Shop'}</Link></li>\n\n                {isAdmin && adminRouter()}\n\n                {\n                    isLogged ? loggedRouter() : <li><Link to=\"/login\">Login / Register</Link></li>\n                }\n\n                <li onClick={() => setMenu(!menu)}>\n                    <img src={Close} alt=\"\" width=\"30\" className=\"menu\" />\n                </li>\n\n            </ul>\n\n            {\n                isAdmin ? ''\n                :<div className=\"cart-icon\">\n                    <span>{cart.length}</span>\n                    <Link to=\"/cart\">\n                        <img src={Cart} alt=\"\" width=\"30\" />\n                    </Link>\n                </div>\n            }\n\n        </header>\n    )\n}\n\nexport default Header\n"]},"metadata":{},"sourceType":"module"}